[역할]
당신은 시니어 백엔드 소프트웨어 엔지니어이다.

[목표]
무인 판매기에서 사용되는 “장치 등록 시스템(Device Registration System)”의
백엔드 API를 구현하라.

구현 과정에서 합리적인 가정이 필요한 경우,
간단한 주석 또는 짧은 README 섹션을 통해 명시하라.

[기술 제약]
- 언어: TypeScript
- 런타임: Node.js
- 백엔드 프레임워크: NestJS
- 외부 클라우드 서비스에 의존하지 않고 실행 가능해야 한다.

[도메인 개요]
각 무인 판매기 장치는 네트워크 연결 시 중앙 서버에 등록 요청을 전송한다.
관리자는 등록 요청을 검토한 후 승인 또는 거부할 수 있다.
승인된 장치는 활성 상태가 되며, 이후 운영 종료(해제)될 수 있다.

[장치 상태]
- UNREGISTERED: 미등록
- PENDING: 등록 요청 대기 상태
- REGISTERED: 승인 완료 및 활성 상태
- DECOMMISSIONED: 운영 종료 또는 제거됨

[기능 요구사항]
1) 장치 등록 요청
- 장치는 자신의 식별 정보를 서버로 전송하여 등록을 요청한다.
- 서버는 요청을 기록하고 장치 상태를 PENDING으로 설정한다.
- 동일 장치에 대한 중복 등록 요청은 적절히 처리되어야 한다.

2) 관리자 검토
- 관리자는 등록 대기 중인 요청 목록을 조회할 수 있어야 한다.
- 관리자는 특정 요청을 승인하거나 거부할 수 있어야 한다.

3) 승인 / 거부
- 승인 시 장치 상태는 REGISTERED로 변경된다.
- 거부 시 등록 요청은 취소되며, 거부 사유가 기록되어야 한다.

4) 장치 조회
- 시스템은 등록된 장치들과 각 장치의 현재 상태를 조회할 수 있어야 한다.

5) 장치 해제
- 관리자는 등록된 장치를 비활성화할 수 있어야 한다.
- 해제된 장치는 DECOMMISSIONED 상태로 전환된다.

6) 이벤트 알림(추상)
- 등록 요청, 승인, 거부, 해제와 같은 주요 상태 변화는
  내부 이벤트로 처리되어야 한다.
- 메시징의 구체적인 구현 방식은 개발자에게 위임한다.

[비기능 요구사항]
- 관심사의 명확한 분리 (Controller / Service / Repository 또는 이에 준하는 구조)
- 필수 입력값에 대한 검증
- 일관된 오류 처리 및 HTTP 상태 코드 사용
- 주요 작업에 대한 기본적인 로깅
- 과도한 하드코딩 지양

[프로젝트/폴더 구조 요구사항(필수)]
- 코드는 반드시 “폴더(프로젝트) 구조”로 분리하여 작성한다.
- 단일 파일에 모든 코드를 작성하는 방식은 금지한다.
- 최소한 다음과 같은 구조를 포함하라(세부는 합리적으로 조정 가능):

/src
  /devices
    devices.controller.ts
    devices.service.ts
    dto/...
    domain/...
    repository/...
  /common
    errors/...
    response/...
    logging/...
  app.module.ts
  main.ts

[출력 요구사항]
다음을 제공하라:
1) 프로젝트 폴더 트리(간단)
2) 핵심 소스 코드(폴더 구조에 맞춰 파일 단위로 구분하여 제시)
3) 애플리케이션 실행 방법에 대한 최소한의 설명

설명은 간결하게 유지하고, 실행 가능한 백엔드 구현에 집중하라.
